<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JsonToForm v2.0 - Modern Demo</title>
    
    <!-- JsonToForm v2.0 Styles -->
    <link href="src/styles/jsonToForm.modern.css" rel="stylesheet" type="text/css" />
    
    <!-- jQuery -->
    <script src="jquery/jquery.min.js"></script>
    
    <!-- JsonToForm v2.0 -->
    <script src="jsonToForm/jsonToForm.v2.js"></script>
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
            color: #212529;
        }
        
        .demo-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            height: calc(100vh - 100px);
        }
        
        .demo-panel {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 20px;
            overflow: auto;
        }
        
        .demo-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .demo-header h1 {
            color: #007bff;
            margin: 0;
            font-size: 2.5rem;
            font-weight: 300;
        }
        
        .demo-header p {
            color: #6c757d;
            margin: 10px 0 0;
            font-size: 1.1rem;
        }
        
        .demo-controls {
            text-align: center;
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .demo-btn {
            padding: 8px 16px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.2s;
        }
        
        .demo-btn:hover {
            background: #0056b3;
        }
        
        .demo-btn.secondary {
            background: #6c757d;
        }
        
        .demo-btn.secondary:hover {
            background: #545b62;
        }
        
        .output-section {
            margin-bottom: 20px;
        }
        
        .output-section h3 {
            margin: 0 0 10px;
            color: #495057;
            font-size: 1rem;
            font-weight: 600;
        }
        
        .output-content {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 15px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 13px;
            line-height: 1.4;
            overflow: auto;
            max-height: 200px;
        }
        
        .validation-status {
            padding: 10px;
            border-radius: 4px;
            font-weight: 600;
            text-align: center;
            margin-bottom: 15px;
        }
        
        .validation-status.valid {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .validation-status.invalid {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        @media (max-width: 768px) {
            .demo-container {
                grid-template-columns: 1fr;
                gap: 15px;
                height: auto;
            }
            
            .demo-header h1 {
                font-size: 2rem;
            }
            
            .demo-controls {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="demo-header">
        <h1>JsonToForm v2.0</h1>
        <p>Modern jQuery Plugin for JSON Schema Forms</p>
    </div>
    
    <div class="demo-controls">
        <button class="demo-btn" onclick="toggleTheme()">üåì Toggle Dark Theme</button>
        <button class="demo-btn secondary" onclick="loadSampleData()">üìã Load Sample Data</button>
        <button class="demo-btn secondary" onclick="clearForm()">üóëÔ∏è Clear Form</button>
        <button class="demo-btn secondary" onclick="validateForm()">‚úì Validate Form</button>
    </div>
    
    <div class="demo-container">
        <div class="demo-panel">
            <h3>Form</h3>
            <div id="jsonEditor"></div>
        </div>
        
        <div class="demo-panel">
            <div class="validation-status" id="validationStatus">
                ‚úì Form is valid
            </div>
            
            <div class="output-section">
                <h3>JSON Value</h3>
                <pre class="output-content" id="jsonValue">{}</pre>
            </div>
            
            <div class="output-section">
                <h3>Validation Errors</h3>
                <pre class="output-content" id="validationErrors">No errors</pre>
            </div>
        </div>
    </div>

    <script>
        // Enhanced JSON Schema with modern features
        const modernSchema = {
            "title": "User Profile Form",
            "type": "object",
            "properties": {
                "personalInfo": {
                    "title": "Personal Information",
                    "type": "object",
                    "ui": {
                        "inlineHint": "Please provide your basic personal information"
                    },
                    "properties": {
                        "firstName": {
                            "title": "First Name",
                            "type": "string",
                            "minLength": 2,
                            "maxLength": 50,
                            "ui": {
                                "placeholder": "Enter your first name",
                                "hoverHint": "Your given name as it appears on official documents",
                                "validationHint": "First name must be between 2-50 characters"
                            }
                        },
                        "lastName": {
                            "title": "Last Name",
                            "type": "string",
                            "minLength": 2,
                            "maxLength": 50,
                            "ui": {
                                "placeholder": "Enter your last name"
                            }
                        },
                        "email": {
                            "title": "Email Address",
                            "type": "email",
                            "ui": {
                                "placeholder": "user@example.com",
                                "inlineHint": "We'll never share your email with anyone else"
                            }
                        },
                        "phone": {
                            "title": "Phone Number",
                            "type": "tel",
                            "ui": {
                                "placeholder": "+1 (555) 123-4567"
                            }
                        },
                        "birthDate": {
                            "title": "Date of Birth",
                            "type": "date"
                        },
                        "gender": {
                            "title": "Gender",
                            "type": "string",
                            "enum": ["Male", "Female", "Other", "Prefer not to say"],
                            "ui": {
                                "editor": "radio"
                            }
                        },
                        "bio": {
                            "title": "Biography",
                            "type": "string",
                            "maxLength": 500,
                            "ui": {
                                "editor": "textarea",
                                "placeholder": "Tell us about yourself...",
                                "inlineHint": "Optional: Share a brief description about yourself (max 500 characters)"
                            }
                        }
                    },
                    "required": ["firstName", "lastName", "email"]
                },
                "preferences": {
                    "title": "Preferences",
                    "type": "object",
                    "properties": {
                        "newsletter": {
                            "title": "Subscribe to Newsletter",
                            "type": "boolean",
                            "ui": {
                                "inlineHint": "Receive updates about new features and events"
                            }
                        },
                        "theme": {
                            "title": "Preferred Theme",
                            "type": "string",
                            "enum": ["Light", "Dark", "Auto"],
                            "ui": {
                                "editor": "select"
                            }
                        },
                        "favoriteColor": {
                            "title": "Favorite Color",
                            "type": "string",
                            "ui": {
                                "editor": "color"
                            }
                        },
                        "notifications": {
                            "title": "Notification Settings",
                            "type": "array",
                            "items": {
                                "type": "object",
                                "properties": {
                                    "type": {
                                        "title": "Type",
                                        "type": "string",
                                        "enum": ["Email", "SMS", "Push", "In-App"]
                                    },
                                    "enabled": {
                                        "title": "Enabled",
                                        "type": "boolean"
                                    },
                                    "frequency": {
                                        "title": "Frequency",
                                        "type": "string",
                                        "enum": ["Immediately", "Daily", "Weekly", "Monthly"]
                                    }
                                },
                                "required": ["type", "enabled"]
                            },
                            "ui": {
                                "inlineHint": "Configure how you want to receive different types of notifications"
                            }
                        }
                    }
                },
                "spacer1": {
                    "type": "spacer",
                    "title": "Additional Information"
                },
                "skills": {
                    "title": "Skills & Interests",
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "ui": {
                        "inlineHint": "Add your skills, hobbies, or areas of interest"
                    }
                }
            },
            "required": ["personalInfo"]
        };

        // Sample data
        const sampleData = {
            "personalInfo": {
                "firstName": "John",
                "lastName": "Doe",
                "email": "john.doe@example.com",
                "phone": "+1 (555) 123-4567",
                "birthDate": "1990-01-15",
                "gender": "Male",
                "bio": "Software developer with a passion for creating amazing user experiences."
            },
            "preferences": {
                "newsletter": true,
                "theme": "Dark",
                "favoriteColor": "#007bff",
                "notifications": [
                    {
                        "type": "Email",
                        "enabled": true,
                        "frequency": "Daily"
                    },
                    {
                        "type": "Push",
                        "enabled": false,
                        "frequency": "Immediately"
                    }
                ]
            },
            "skills": [
                "JavaScript",
                "React",
                "Node.js"
            ]
        };

        let formInstance;

        // Initialize the form
        $(document).ready(function() {
            formInstance = $("#jsonEditor").jsonToForm({
                schema: modernSchema,
                value: {},
                validation: {
                    realTime: true,
                    showHints: true
                },
                callbacks: {
                    afterValueChanged: updateOutput,
                    afterWidgetCreated: updateOutput,
                    afterValidation: updateValidationStatus
                }
            });
            
            updateOutput();
        });

        function updateOutput() {
            if (!formInstance) return;
            
            const value = formInstance.getValue();
            $("#jsonValue").text(JSON.stringify(value, null, 2));
            
            updateValidationStatus();
        }

        function updateValidationStatus() {
            if (!formInstance) return;
            
            const isValid = formInstance.isValid();
            const errors = formInstance.validator.getAllErrors();
            
            const $status = $("#validationStatus");
            const $errors = $("#validationErrors");
            
            if (isValid) {
                $status.removeClass("invalid").addClass("valid").text("‚úì Form is valid");
                $errors.text("No validation errors");
            } else {
                $status.removeClass("valid").addClass("invalid").text("‚úó Form has validation errors");
                $errors.text(errors.map(e => `${e.field}: ${e.message}`).join('\n') || "Validation errors detected");
            }
        }

        function toggleTheme() {
            const currentTheme = document.body.getAttribute('data-json-form-theme');
            const newTheme = currentTheme === 'dark' ? '' : 'dark';
            document.body.setAttribute('data-json-form-theme', newTheme);
        }

        function loadSampleData() {
            if (formInstance) {
                formInstance.setValue(sampleData);
            }
        }

        function clearForm() {
            if (formInstance) {
                formInstance.setValue({});
            }
        }

        function validateForm() {
            if (formInstance) {
                formInstance.validator.validateAll();
                updateValidationStatus();
                
                // Show toast notification
                const isValid = formInstance.isValid();
                const message = isValid ? "‚úì Form validation passed!" : "‚úó Form has validation errors";
                showToast(message, isValid ? 'success' : 'error');
            }
        }

        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.textContent = message;
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#28a745' : type === 'error' ? '#dc3545' : '#007bff'};
                color: white;
                padding: 12px 20px;
                border-radius: 4px;
                font-size: 14px;
                z-index: 10000;
                transform: translateX(400px);
                transition: transform 0.3s ease;
            `;
            
            document.body.appendChild(toast);
            
            // Animate in
            setTimeout(() => {
                toast.style.transform = 'translateX(0)';
            }, 10);
            
            // Remove after 3 seconds
            setTimeout(() => {
                toast.style.transform = 'translateX(400px)';
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 300);
            }, 3000);
        }

        // Add some custom validation rules for demonstration
        $(document).ready(function() {
            // Add custom validation rule for strong password
            if (window.JsonFormValidator) {
                JsonFormValidator.prototype.validationRules = JsonFormValidator.prototype.validationRules || {};
                JsonFormValidator.prototype.validationRules['strongPassword'] = {
                    pattern: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,
                    message: 'Password must contain at least 8 characters including uppercase, lowercase, number and special character'
                };
            }
        });
    </script>
</body>
</html>